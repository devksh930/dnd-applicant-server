spring:
  datasource:
    url: ${SPRING_DATASOURCE_URL}?rewriteBatchedStatements=true&useServerPrepStmts=true
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
    hikari:
      pool-name: DND-HikariPool-t4g-small
      maximum-pool-size: 3
      minimum-idle: 1
      idle-timeout: 300000
      max-lifetime: 1800000
      connection-timeout: 30000
      validation-timeout: 5000
      auto-commit: true
      leak-detection-threshold: 60000

  jpa:
    show-sql: true
    open-in-view: false
    hibernate:
      ddl-auto: update
      jdbc.batch_size: 1000
      order_inserts: true
    properties:
      hibernate:
        format_sql: true
        highlight_sql: true
        use_sql_comments: true
        # 느린 쿼리만 로깅(밀리초). 필요 시 500~1000 사이로 조정 가능
        session:
          events:
            log:
              LOG_QUERIES_SLOWER_THAN_MS: 700
  main:
    banner-mode: off

encryption:
  aes:
    password: ${ENCRYPTION_TEXT_PASSWORD}
    salt: ${ENCRYPTION_TEXT_SALT}
  hmac:
    key: ${HMAC_TEXT}

github:
  token: ${GITHUB_TOKEN}
  repository:
    owner: ${GITHUB_REPOSITORY_OWNER}
    name: ${GITHUB_REPOSITORY_NAME}

server:
  port: 8080
cors:
  allowedOriginsPatterns:
    - "https://*.google.com"
    - "https://google.com"
    - "http://localhost:3000"
    - "https://*.dnd.ac"
  allowedMethods:
    - HEAD
    - OPTIONS
    - GET
    - POST
    - PATCH
    - PUT
    - DELETE
  allowedHeaders:
    - "*"
  exposedHeaders: []
  allowCredentials: true
  maxAge: 3600

logging:
  level:
    root: INFO
    # SQL 및 바인딩 파라미터 로깅
    org.hibernate.SQL: DEBUG
    org.hibernate.orm.jdbc.bind: TRACE
    # Hibernate 느린 쿼리 전용 로거
    org.hibernate.SQL_SLOW: INFO
    # 애플리케이션 기본 로그 및 캐시 로그는 보이도록 설정
    ac.dnd.server: INFO
    org.springframework.cache: INFO
    org.springframework.cache.interceptor: INFO
jwt:
  secret: ${JWT_SECRET}
  cookie:
    secure: ${JWT_COOKIE_SECURE:true}
    same-site: ${JWT_COOKIE_SAME_SITE:Lax}

cloud:
  aws:
    s3:
      bucket: ${AWS_S3_BUCKET}
    region: ${AWS_REGION:ap-northeast-2}
    credentials:
      access-key: ${AWS_ACCESS_KEY}
      secret-key: ${AWS_SECRET_KEY}

  aws:
    enabled: false

springdoc:
  api-docs:
    enabled: false
  swagger-ui:
    url: /swagger/openapi3.json
    path: /swagger-ui.html

#logging:
#  level: