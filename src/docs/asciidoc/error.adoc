= 전역 예외 처리(Global Exception)
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 3
:sectlinks:
:sectnums:

link:index.html[← 목록으로 돌아가기]

== 개요

서버 전반에서 발생하는 예외들은 `GlobalExceptionHandler`를 통해 일관된 JSON 포맷으로 응답됩니다. +
이 문서는 공통적으로 사용되는 에러 코드 목록과 주요 에러 상황에 대한 예시를 다룹니다.

---

== 공통 에러 응답 구조

모든 에러 응답은 아래와 같은 필드 구조를 가집니다.

[discrete]
==== 응답 필드 설명

include::{snippets}/error-validation/response-fields.adoc[]

---

== 에러 코드 정의 (ErrorCode)

서버에서 정의하여 사용하는 상세 에러 코드(`code`)와 메시지 목록입니다.

=== Common (C) - 공통

|===
|HTTP Status |Code |Message |Description

|422
|`C001`
|잘못된 입력값입니다
|유효성 검증 실패 (Validation)

|405
|`C002`
|허용되지 않은 메서드입니다
|지원하지 않는 HTTP Method 호출

|404
|`C003`
|리소스를 찾을 수 없습니다
|존재하지 않는 URL 등

|500
|`C004`
|서버 오류가 발생했습니다
|내부 로직 에러

|400
|`C005`
|잘못된 타입입니다
|타입 변환 실패 (Type Mismatch)

|403
|`C006`
|접근이 거부되었습니다
|권한 부족
|===


=== Applicant (AP) - 지원자

|===
|HTTP Status |Code |Message |Description

|404
|`AP001`
|이름과 이메일을 다시 확인해주세요.
|지원자 정보 불일치

|422
|`AP002`
|합격자 조회 가능 기간이 아닙니다
|조회 기간 외 접근
|===


=== Event (EV) - 이벤트

|===
|HTTP Status |Code |Message |Description

|404
|`EV001`
|이벤트를 찾을 수 없습니다.
|존재하지 않는 이벤트 ID
|===


=== Auth (AU) - 인증

|===
|HTTP Status |Code |Message |Description

|401
|`AU001`
|존재하지 않는 계정입니다
|로그인 실패

|403
|`AU002`
|인증되지 않은 사용자입니다
|토큰 누락/만료

|401
|`AU003`
|올바르지 않은 인증 정보입니다
|비밀번호 불일치 등
|===


=== Project (PJ) - 프로젝트

|===
|HTTP Status |Code |Message |Description

|404
|`PJ001`
|프로젝트를 찾을 수 없습니다
|존재하지 않는 프로젝트 ID

|422
|`PJ002`
|링크가 만료되었습니다
|제출 기한 만료

|404
|`PJ003`
|링크를 찾을 수 없습니다
|잘못된 링크 키
|===


=== File (FL) - 파일

|===
|HTTP Status |Code |Message |Description

|404
|`FL001`
|파일을 찾을 수 없습니다
|파일 ID 조회 실패

|500
|`FL002`
|파일 업로드에 실패했습니다
|S3/스토리지 오류
|===

---

== 주요 에러 예시

대표적인 에러 케이스들에 대한 요청/응답 스니펫입니다.

=== 1. 잘못된 입력값 (422 Unprocessable Entity)

필수값 누락, 형식 위반 등 Bean Validation에 실패했을 때 발생합니다. `errors` 배열에 상세 필드 오류가 포함됩니다.

[discrete]
==== 요청 예시 (Validation Fail)

include::{snippets}/error-validation/http-request.adoc[]

[discrete]
==== 응답 예시

include::{snippets}/error-validation/http-response.adoc[]


=== 2. 잘못된 타입 (400 Bad Request)

숫자 필드에 문자열을 넣는 등, 파라미터 타입 바인딩에 실패했을 때 발생합니다.

[discrete]
==== 요청 예시 (Type Mismatch)

include::{snippets}/error-type-mismatch/http-request.adoc[]

[discrete]
==== 응답 예시

include::{snippets}/error-type-mismatch/http-response.adoc[]


=== 3. 허용되지 않은 메서드 (405 Method Not Allowed)

지원하지 않는 HTTP Method로 요청했을 때 발생합니다.

[discrete]
==== 요청 예시

include::{snippets}/error-method-not-allowed/http-request.adoc[]

[discrete]
==== 응답 예시

include::{snippets}/error-method-not-allowed/http-response.adoc[]


=== 4. 인증되지 않음 (403 Forbidden/401 Unauthorized)

인증 헤더가 없거나 유효하지 않은 토큰으로 보호된 리소스에 접근했을 때 발생합니다.

[discrete]
==== 요청 예시

include::{snippets}/error-auth-unauthenticated/http-request.adoc[]

[discrete]
==== 응답 예시

include::{snippets}/error-auth-unauthenticated/http-response.adoc[]


=== 5. 비즈니스 예외

비즈니스 로직 처리 중 발생하는 도메인별 예외들입니다.

==== 프로젝트 없음 (404 Not Found)

include::{snippets}/error-business-not-found/http-response.adoc[]

==== 링크 만료 (422 Unprocessable Entity)

include::{snippets}/error-business-expired/http-response.adoc[]

==== 링크 없음 (404 Not Found)

include::{snippets}/error-business-link-not-found/http-response.adoc[]


=== 6. 서버 내부 오류 (500 Internal Server Error)

예상치 못한 시스템 오류가 발생했을 때 반환됩니다.

[discrete]
==== 응답 예시

include::{snippets}/error-internal/http-response.adoc[]